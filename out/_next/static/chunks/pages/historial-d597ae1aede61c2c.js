(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{5536:(e,a,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/historial",function(){return n(234)}])},234:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>d});var t=n(4848),i=n(6540),s=n(4335),o=n(141),r=n.n(o),l=n(6715);function d(){let[e,a]=(0,i.useState)([]),[n,o]=(0,i.useState)(null),d=(0,l.useRouter)();(0,i.useEffect)(()=>{(async()=>{try{let e=(await s.A.get("http://34.29.123.189/encomiendas/")).data;console.log("Datos del backend (encomiendas):",e);let n=e.map(e=>({id:e.id,fechaLlegada:e.Fecha_Llegada||"Fecha no disponible",fechaRecepcion:e.Fecha_Recepcion||"Fecha no disponible",departamento:e.departamento||"Sin informaci\xf3n",residente:e.residente||"Sin informaci\xf3n",estado:e.Fecha_Recepcion?"Entregado":"Pendiente"}));console.log("Datos formateados con nombres:",n),a(n)}catch(e){console.error("Error al obtener los datos de encomiendas:",e.message),o("No se pudieron cargar las encomiendas.")}})()},[]);let c=e=>{if(!e||"Fecha no disponible"===e)return"Fecha no disponible";let a=new Date(e);return isNaN(a.getTime())?"Fecha inv\xe1lida":a.toLocaleString("es-CL",{timeZone:"America/Santiago"})};return(0,t.jsxs)("div",{className:r().container,children:[(0,t.jsx)("h1",{className:r().title,children:"Historial de Encomiendas"}),(0,t.jsx)("button",{className:r().backButton,onClick:()=>d.push("/"),children:"â† Volver"}),n?(0,t.jsx)("p",{className:r().error,children:n}):(0,t.jsx)("div",{className:r().tableContainer,children:(0,t.jsxs)("table",{className:r().table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Fecha de Llegada"}),(0,t.jsx)("th",{children:"Departamento"}),(0,t.jsx)("th",{children:"Residente"}),(0,t.jsx)("th",{children:"Estado"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:c(e.fechaLlegada)}),(0,t.jsx)("td",{children:e.departamento}),(0,t.jsx)("td",{children:e.residente}),(0,t.jsx)("td",{className:"Pendiente"===e.estado?r().pendiente:r().entregado,children:e.estado})]},e.id))})]})})]})}},141:e=>{e.exports={container:"historial_container__p18Am",title:"historial_title__kWak1",backButton:"historial_backButton__8Z7vS",tableContainer:"historial_tableContainer__DvRFs",table:"historial_table__LL9ll",pendiente:"historial_pendiente__SmPxz",entregado:"historial_entregado__aIcmZ"}}},e=>{var a=a=>e(e.s=a);e.O(0,[909,636,593,792],()=>a(5536)),_N_E=e.O()}]);